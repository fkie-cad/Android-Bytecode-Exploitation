#include <jni.h>
#include <stdint.h>


extern "C"
JNIEXPORT jlong JNICALL
Java_com_poc_poc_1remote_MainActivity_leakStack(JNIEnv *env, jclass clazz) {
    uint64_t i;
    return (uint64_t)&i;
}

extern "C"
JNIEXPORT void JNICALL
Java_com_poc_poc_1remote_MainActivity_writeIndexed(JNIEnv *env, jclass clazz, jint index,
                                                   jlong value) __attribute__ ((optnone)) {
    uint64_t i;
    uint64_t *buffer = &i;
    buffer[index] = value;
}